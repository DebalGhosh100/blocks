blocks:
  - name: "List all files"
    description: "This step lists out all the files"
    run: "ls -al"


  - name: "Install python3"
    description: "This step installs python3"
    run: "sudo apt-get install python3 -y"

  - name: "Log out ARLH and MTLP IPs"
    description: "This step logs out of the ARL-H and MTLP machines"
    run: |
      echo "Logging out of ARL-H at ${machines.arlh.ip}" &&
      echo "Logging out of MTLP at ${machines.mtlp.ip}"

  - parallel :
      - name: "Testing in ARL-H"
        description: "This step runs in ARL-H"
        run: |
          echo "running in ${machines.arlh.ip}" &&
          python3 ssh_log_streamer.py ${machines.arlh.username}@${machines.arlh.ip} ${machines.arlh.password} "ls -al" ./logs/arlh.log

      - name: "Testing in MTL-P"
        description: "This step runs in MTL-P"
        run: |
          echo "running in ${machines.mtlp.ip}" &&
          python3 ssh_log_streamer.py ${machines.mtlp.username}@${machines.mtlp.ip} ${machines.mtlp.password} "ls -al" ./logs/mtlp.log


  - name: "Logging conclusion"
    description: "This step concludes the logging process"
    run: |
      echo "Logging complete for ARL-H" &&
      echo "Logs can be found in ./logs/arlh.log"