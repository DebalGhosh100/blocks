blocks:
  - name: "Prepare Logs Directory"
    description: "Create directory for SSH execution logs"
    run: "mkdir -p ./logs && echo 'Logs directory ready'"

  - name: "Execute Remote Command - List Files"
    description: "List files in remote server home directory"
    run: python3 remotely.py ${machines.server1.username}@${machines.server1.ip} ${machines.server1.password} "ls -lah ~" ./logs/list_files.log

  - name: "Execute Remote Command - System Info"
    description: "Get system information from remote server"
    run: python3 remotely.py ${machines.server1.username}@${machines.server1.ip} ${machines.server1.password} "uname -a && df -h && free -h" ./logs/system_info.log

  - name: "Display Log Results"
    description: "Show the logs collected from remote execution"
    run: |
      echo "=== Remote Command Logs ==="
      echo ""
      echo "--- List Files Log ---"
      cat ./logs/list_files.log
      echo ""
      echo "--- System Info Log ---"
      cat ./logs/system_info.log

  - name: "Summary"
    description: "Display summary of executed remote commands"
    run: |
      echo "=== Execution Summary ==="
      echo "Total log files created: $(ls -1 ./logs/*.log | wc -l)"
      echo "Log files:"
      ls -lh ./logs/*.log
